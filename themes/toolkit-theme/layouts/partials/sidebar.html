<aside
  class="will-change-transform transform transition-transform -translate-x-full h-screen max-h-screen overflow-y-auto fixed md:fixed top-0 left-0 md:translate-x-0 md:w-60 md:ml-1/4 flex flex-col z-20 sidebar p-3 flex flex-shrink-0 bg-waikawa-gray-50 dark:bg-waikawa-gray-900 border-r border-waikawa-gray-200 dark:border-waikawa-gray-900 ">
  <div class="flex-1">
    <p class="font-bold mb-5 flex items-center gap-2">
      <button aria-label="Close sidebar"
        class="md:hidden menu-trigger-close p-1 rounded text-waikawa-gray-800 dark:text-waikawa-gray-50 hover:bg-waikawa-gray-200 dark:hover:bg-waikawa-gray-700">
        {{- partial "icon/closeIcon.html" . -}}
      </button>
      <a href="{{ .Site.BaseURL }}" class="px-2">
        <span>{{ .Site.Title }}</span>
      </a>
      <button aria-label="Toggle dark mode"
        class="dark-mode-toggle p-2 rounded border dark:border-waikawa-gray-700 hover:bg-waikawa-gray-200 dark:hover:bg-waikawa-gray-700">
        {{- partial "icon/sunIcon.html" . -}}
      </button>
    </p>

    {{ $permalink := cond (eq (len .RelPermalink) 1) .RelPermalink (strings.TrimRight "/" .RelPermalink) }}
    <ul class="list-none flex flex-col gap-1">
      {{ range .Site.Menus.main }}
      <li>
        <a class="px-2 py-1.5 rounded-md text-sm flex items-center justify-between {{ if .Params.Header }} text-waikawa-gray-400 font-semibold pb-0 pl-1 border-b cursor-default pointer-events-none {{ else if eq .URL $permalink }} bg-waikawa-gray-800 text-white dark:bg-waikawa-gray-50 dark:text-waikawa-gray-800 dark:selection:bg-waikawa-gray-400 {{ else }} hover:bg-waikawa-gray-200 dark:hover:bg-waikawa-gray-700 {{ end }}"
          href="{{ if .URL }}{{ .URL }}{{ else }}#{{ end }}" {{ if strings.HasPrefix .URL "http" }} target="_blank"
          rel="noopener" {{ end }}>
          <span>{{ .Name }}</span>
          {{ if strings.HasPrefix .URL "http" }}
          <span>
            {{- partial "icon/externalIcon.html" . -}}
          </span>
          {{ end }}
        </a>
      </li>
      {{ end }}

      
    <li class="mt-5">
        <a class="px-2 py-1.5 text-sm flex items-center justify-between text-waikawa-gray-600 dark:text-waikawa-gray-500 font-semibold pb-2 pl-1 border-b dark:border-waikawa-gray-700  cursor-default pointer-events-none"
          href="/categories">
          Categories
        </a>
      </li>
      {{range $name, $taxonomy := .Site.Taxonomies.categories}} {{ $cnt := .Count }}
      {{ with $.Site.GetPage (printf "/categories/%s" $name) }}
      <li>
      <a href={{ .RelPermalink }} title="All pages with category {{ .LinkTitle }}" class="px-2 py-1.5 rounded-md text-sm flex items-center justify-between hover:bg-waikawa-gray-200 dark:hover:bg-waikawa-gray-700 "><span>{{ .LinkTitle }}</span>
      <span class="text-waikawa-gray-500">{{$cnt}}</span></a>
      </li>
      {{end}}
    {{end}}
    <li class="mt-5">
      <a class="px-2 py-1.5 text-sm flex items-center justify-between text-waikawa-gray-600 dark:text-waikawa-gray-500 font-semibold pb-2 pl-1 border-b dark:border-waikawa-gray-700  cursor-default pointer-events-none"
        href="/tags">
        Tags
      </a>
    </li>
    {{range $name, $taxonomy := .Site.Taxonomies.tags}} {{ $cnt := .Count }}
      {{ with $.Site.GetPage (printf "/tags/%s" $name) }}
      <li>
      <a href={{ .RelPermalink }} title="All pages with tag {{ .LinkTitle }}" class="px-2 py-1.5 rounded-md text-sm flex items-center justify-between hover:bg-waikawa-gray-200 dark:hover:bg-waikawa-gray-700 "><span>{{ .LinkTitle }}</span>
      <span class="text-waikawa-gray-500">{{$cnt}}</span></a>
      </li>
      {{end}}
    {{end}}

  </ul>
</div>
  <div class="flex-1"></div>

  {{ if .Site.Params.newsletter }}
  {{- partial "newsletter-widget.html" . -}}
  {{ end }}
<div class="flex-auto ">
  <ul class="list-none flex flex-wrap justify-center gap-1 pt-2 border-t border-waikawa-gray-200 dark:border-waikawa-gray-600">
    {{ range .Site.Menus.social }}
    <li>
      <a class="px-2 py-1.5 rounded-md text-sm block text-waikawa-gray-800 dark:text-waikawa-gray-50 {{ if eq (.URL|absURL) $permalink }} bg-waikawa-gray-800 text-white dark: {{ else }} hover:bg-waikawa-gray-200 dark:hover:bg-waikawa-gray-700 {{ end }}"
        href="{{ .URL }}" target="_blank" rel="noopener noreferrer">
        <span class="sr-only">{{ .Name }}</span>
        {{ if eq .Name "Twitter" }}
        <span>{{- partial "icon/twitterIcon.html" . -}}</span>
        {{ else if eq .Name "Codeberg" }}
        <span>{{- partial "icon/codebergIcon.html" . -}}</span>
        {{ else if eq .Name "GitHub" }}
        <span>{{- partial "icon/githubIcon.html" . -}}</span>
        {{ else if eq .Name "GitLab" }}
        <span>{{- partial "icon/gitlabIcon.html" . -}}</span>
        {{ else if eq .Name "LinkedIn" }}
        <span>{{- partial "icon/linkedinIcon.html" . -}}</span>
        {{ else if eq .Name "Mastodon" }}
        <span>{{- partial "icon/mastodonIcon.html" . -}}</span>
        {{ else if eq .Name "Instagram" }}
        <span>{{- partial "icon/instagramIcon.html" . -}}</span>
        {{ else if eq .Name "Dribbble" }}
        <span>{{- partial "icon/dribbbleIcon.html" . -}}</span>
        {{ else if eq .Name "Codepen" }}
        <span>{{- partial "icon/codepenIcon.html" . -}}</span>
        {{ else if eq .Name "Twitch" }}
        <span>{{- partial "icon/twitchIcon.html" . -}}</span>
        {{ else if eq .Name "Email" }}
        <span>{{- partial "icon/emailIcon.html" . -}}</span>
        {{ else if eq .Name "RSS" }}
        <span>{{- partial "icon/rssfeedIcon.html" . -}}</span>
        {{ end }}
      </a>
    </li>
    {{ end }}
  </ul>
</div>
</aside>

<div
  class="fixed bg-waikawa-gray-700 bg-opacity-5 transition duration-200 ease-in-out inset-0 z-10 pointer-events-auto md:hidden left-0 top-0 w-full h-full hidden menu-overlay">
</div>

<button aria-label="Toggle Sidebar"
  class="md:hidden absolute top-3 left-3 z-10 menu-trigger p-1 rounded text-waikawa-gray-800 dark:text-waikawa-gray-50 hover:bg-waikawa-gray-600">
  {{- partial "icon/menuIcon.html" . -}}
</button>
